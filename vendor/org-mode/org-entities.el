;;; org-entities.el --- Support for special entities in Org-mode

;; Copyright (C) 2010 Free Software Foundation, Inc.

;; Author: Carsten Dominik <carsten at orgmode dot org>,
;;         Ulf Stegemann <ulf at zeitform dot de>
;; Keywords: outlines, calendar, wp
;; Homepage: http://orgmode.org
;; Version: 6.35i
;;
;; This file is part of GNU Emacs.
;;
;; GNU Emacs is free software: you can redistribute it and/or modify
;; it under the terms of the GNU General Public License as published by
;; the Free Software Foundation, either version 3 of the License, or
;; (at your option) any later version.

;; GNU Emacs is distributed in the hope that it will be useful,
;; but WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;; GNU General Public License for more details.

;; You should have received a copy of the GNU General Public License
;; along with GNU Emacs.  If not, see <http://www.gnu.org/licenses/>.
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;;; Commentary:

(require 'org-macs)

(declare-function org-table-align "org-table" ())

(eval-when-compile
  (require 'cl))

(defgroup org-entities nil
  "Options concerning entities in Org-mode."
  :tag "Org Entities"
  :group 'org)

(defcustom org-entities-ascii-explanatory nil
  "Non-nil means replace special entities in ASCII.
For example, this will replace \"\\nsup\" with \"[not a superset of]\"
in backends where the corresponding character is not available."
  :group 'org-entities
  :type 'boolean)

(defcustom org-entities-user nil
  "User-defined entities used in Org-mode to preduce special characters.
Each entry in this list is a list of strings.  It associate the name
of the entity that can be inserted into an Org file as \\name with the
appropriate replacements for the different export backends.  The order
of the fields is he following

name                 As a string, without the leading backslash
LaTeX replacement    In ready LaTeX, no further processing will take place
LaTeX mathp          A Boolean, either t or nil.  t if this entity needs
                     to be in math mode.
HTML replacement     In ready HTML, no further processing will take place.
                     Usually this will be an &...; entity.
ASCII replacement    Plain ASCII, no extensions.  Symbols that cannot be
                     represented will be written out as an explanatory text.
                     But see the variable `org-entities-ascii-keep-macro-form'.
Latin1 replacement   Use the special characters available in latin1.
utf-8 replacement    Use special character available in utf-8.

If you define new entities here that require specific LaTeX packages to be
loaded, add these packages to `org-export-latex-packages-alist'."
  :group 'org-entities
  :type '(repeat
	  (list
	   (string :tag "name  ")
	   (string :tag "LaTeX ")
	   (boolean :tag "Require LaTeX math?")
	   (string :tag "HTML  ")
	   (string :tag "ASCII ")
	   (string :tag "Latin1")
	   (string :tag "utf-8 "))))

(defconst org-entities
  '(("nbsp" "~" nil "&nbsp;" " " " " " ")
    ("iexcl" "!`" nil "&iexcl;" "!" "¬°" "¬°")
    ("cent" "\\textcent{}" nil "&cent;" "cent" "¬¢" "¬¢")
    ("pound" "\\pounds{}" nil "&pound;" "pound" "¬£" "¬£")
    ("curren" "\\textcurrency{}" nil "&curren;" "curr." "¬§" "¬§")
    ("yen" "\\textyen{}" nil "&yen;" "yen" "¬•" "¬•")
    ("brvbar" "\\textbrokenbar{}" nil "&brvbar;" "|" "¬¶" "¬¶")
    ("vert" "\\vert{}" t "&#124;" "|" "|" "|")
    ("sect" "\\S" nil "&sect;" "paragraph" "¬ß" "¬ß")
    ("uml" "\\textasciidieresis{}" nil "&uml;" "[diaeresis]" "¬®" "¬®")
    ("copy" "\\textcopyright{}" nil "&copy;" "(c)" "¬©" "¬©")
    ("ordf" "\\textordfeminine{}" nil "&ordf;" "_a_" "¬™" "¬™")
    ("laquo" "\\guillemotleft{}" nil "&laquo;" "<<" "¬´" "¬´")
    ("not" "\\textlnot{}" nil "&not;" "[angled dash]" "¬¨" "¬¨")
    ("shy" "\\-" nil "&shy;" "" "" "")
    ("reg" "\\textregistered{}" nil "&reg;" "(r)" "¬Æ" "¬Æ")
    ("macr" "\\textasciimacron{}" nil "&macr;" "[macron]" "¬Ø" "¬Ø")
    ("deg" "\\textdegree{}" nil "deg" "degree" "¬∞" "¬∞")
    ("pm" "\\textpm{}" nil "&plusmn;" "+-" "¬±" "¬±")
    ("plusmn" "\\textpm{}" nil "&plusmn;" "+-" "¬±" "¬±")
    ("sup2" "\\texttwosuperior{}" nil "&sup2;" "^2" "¬≤" "¬≤")
    ("sup3" "\\textthreesuperior{}" nil "&sup3;" "^3" "¬≥" "¬≥")
    ("acutex" "\\acute x" t "&acute;x" "'x" "'x" "ùë•ÃÅ")
    ("micro" "\\textmu{}" nil "&micro;" "micro" "¬µ" "¬µ")
    ("para" "\\P{}" nil "&para;" "[pilcrow]" "¬∂" "¬∂")
    ("middot" "\\textperiodcentered{}" nil "&middot;" "." "¬∑" "¬∑")
    ("odot" "\\odot" t "o" "[circled dot]" "[circled dot]" " ò")
    ("star" "\\star" t "*" "*" "*" "‚ãÜ")
    ("cedil" "\\c{}" nil "&cedil;" "[cedilla]" "¬∏" "¬∏")
    ("sup1" "\\textonesuperior{}" nil "&sup1;" "^1" "¬π" "¬π")
    ("ordm" "\\textordmasculine{}" nil "&ordm;" "_o_" "¬∫" "¬∫")
    ("raquo" "\\guillemotright{}" nil "&raquo;" ">>" "¬ª" "¬ª")
    ("iquest" "?`" nil "&iquest;" "?" "¬ø" "¬ø")
    ("Agrave" "\\`{A}" nil "&Agrave;" "A" "√Ä" "√Ä")
    ("Aacute" "\\'{A}" nil "&Aacute;" "A" "√Å" "√Å")
    ("Acirc" "\\^{A}" nil "&Acirc;" "A" "√Ç" "√Ç")
    ("Atilde" "\\~{A}" nil "&Atilde;" "A" "√É" "√É")
    ("Auml" "\\\"{A}" nil "&Auml;" "Ae" "√Ñ" "√Ñ")
    ("Aring" "\\AA{}" nil "&Aring;" "A" "√Ö" "√Ö")
    ("AA" "\\AA{}" nil "&Aring;" "A" "√Ö" "√Ö")
    ("AElig" "\\AE{}" nil "&AElig;" "AE" "√Ü" "√Ü")
    ("Ccedil" "\\c{C}" nil "&Ccedil;" "C" "√á" "√á")
    ("Egrave" "\\`{E}" nil "&Egrave;" "E" "√à" "√à")
    ("Eacute" "\\'{E}" nil "&Eacute;" "E" "√â" "√â")
    ("Ecirc" "\\^{E}" nil "&Ecirc;" "E" "√ä" "√ä")
    ("Euml" "\\\"{E}" nil "&Euml;" "E" "√ã" "√ã")
    ("Igrave" "\\`{I}" nil "&Igrave;" "I" "√å" "√å")
    ("Iacute" "\\'{I}" nil "&Iacute;" "I" "√ç" "√ç")
    ("Icirc" "\\^{I}" nil "&Icirc;" "I" "√é" "√é")
    ("Iuml" "\\\"{I}" nil "&Iuml;" "I" "√è" "√è")
    ("ETH" "\\DH{}" nil "&ETH;" "D" "√ê" "√ê")
    ("Ntilde" "\\~{N}" nil "&Ntilde;" "N" "√ë" "√ë")
    ("Ograve" "\\`{O}" nil "&Ograve;" "O" "√í" "√í")
    ("Oacute" "\\'{O}" nil "&Oacute;" "O" "√ì" "√ì")
    ("Ocirc" "\\^{O}" nil "&Ocirc;" "O" "√î" "√î")
    ("Otilde" "\\~{O}" nil "&Otilde;" "O" "√ï" "√ï")
    ("Ouml" "\\\"{O}" nil "&Ouml;" "Oe" "√ñ" "√ñ")
    ("times" "\\texttimes{}" nil "&times;" "*" "√ó" "√ó")
    ("Oslash" "\\O" nil "&Oslash;" "O" "√ò" "√ò")
    ("Ugrave" "\\`{U}" nil "&Ugrave;" "U" "√ô" "√ô")
    ("Uacute" "\\'{U}" nil "&Uacute;" "U" "√ö" "√ö")
    ("Ucirc" "\\^{U}" nil "&Ucirc;" "U" "√õ" "√õ")
    ("Uuml" "\\\"{U}" nil "&Uuml;" "Ue" "√ú" "√ú")
    ("Yacute" "\\'{Y}" nil "&Yacute;" "Y" "√ù" "√ù")
    ("THORN" "\\TH{}" nil "&THORN;" "TH" "√û" "√û")
    ("szlig" "\\ss{}" nil "&szlig;" "ss" "√ü" "√ü")
    ("agrave" "\\`{a}" nil "&agrave;" "a" "√†" "√†")
    ("aacute" "\\'{a}" nil "&aacute;" "a" "√°" "√°")
    ("acirc" "\\^{a}" nil "&acirc;" "a" "√¢" "√¢")
    ("atilde" "\\~{a}" nil "&atilde;" "a" "√£" "√£")
    ("auml" "\\\"{a}" nil "&auml;" "ae" "√§" "√§")
    ("aring" "\\aa{}" nil "&aring;" "a" "√•" "√•")
    ("aelig" "\\ae{}" nil "&aelig;" "ae" "√¶" "√¶")
    ("ccedil" "\\c{c}" nil "&ccedil;" "c" "√ß" "√ß")
    ("checkmark" "\\checkmark" t "&#10003;" "[checkmark]" "[checkmark]" "‚úì")
    ("egrave" "\\`{e}" nil "&egrave;" "e" "√®" "√®")
    ("eacute" "\\'{e}" nil "&eacute;" "e" "√©" "√©")
    ("ecirc" "\\^{e}" nil "&ecirc;" "e" "√™" "√™")
    ("euml" "\\\"{e}" nil "&euml;" "e" "√´" "√´")
    ("igrave" "\\`{i}" nil "&igrave;" "i" "√¨" "√¨")
    ("iacute" "\\'{i}" nil "&iacute;" "i" "√≠" "√≠")
    ("icirc" "\\^{i}" nil "&icirc;" "i" "√Æ" "√Æ")
    ("iuml" "\\\"{i}" nil "&iuml;" "i" "√Ø" "√Ø")
    ("eth" "\\dh{}" nil "&eth;" "dh" "√∞" "√∞")
    ("ntilde" "\\~{n}" nil "&ntilde;" "n" "√±" "√±")
    ("ograve" "\\`{o}" nil "&ograve;" "o" "√≤" "√≤")
    ("oacute" "\\'{o}" nil "&oacute;" "o" "√≥" "√≥")
    ("ocirc" "\\^{o}" nil "&ocirc;" "o" "√¥" "√¥")
    ("otilde" "\\~{o}" nil "&otilde;" "o" "√µ" "√µ")
    ("ouml" "\\\"{o}" nil "&ouml;" "oe" "√∂" "√∂")
    ("oslash" "\\o{}" nil "&oslash;" "o" "√∏" "√∏")
    ("ugrave" "\\`{u}" nil "&ugrave;" "u" "√π" "√π")
    ("uacute" "\\'{u}" nil "&uacute;" "u" "√∫" "√∫")
    ("ucirc" "\\^{u}" nil "&ucirc;" "u" "√ª" "√ª")
    ("uuml" "\\\"{u}" nil "&uuml;" "ue" "√º" "√º")
    ("yacute" "\\'{y}" nil "&yacute;" "y" "√Ω" "√Ω")
    ("thorn" "\\th{}" nil "&thorn;" "th" "√æ" "√æ")
    ("yuml" "\\\"{y}" nil "&yuml;" "y" "√ø" "√ø")
    ("fnof" "\\textit{f}" nil "&fnof;" "f" "f" "∆í")
    ("Alpha" "A" nil "&Alpha;" "Alpha" "Alpha" "Œë")
    ("Beta" "B" nil "&Beta;" "Beta" "Beta" "Œí")
    ("Gamma" "\\Gamma" t "&Gamma;" "Gamma" "Gamma" "Œì")
    ("Delta" "\\Delta" t "&Delta;" "Delta" "Gamma" "Œî")
    ("Epsilon" "E" nil "&Epsilon;" "Epsilon" "Epsilon" "Œï")
    ("Zeta" "Z" nil "&Zeta;" "Zeta" "Zeta" "Œñ")
    ("Eta" "H" nil "&Eta;" "Eta" "Eta" "Œó")
    ("Theta" "\\Theta" t "&Theta;" "Theta" "Theta" "Œò")
    ("Iota" "I" nil "&Iota;" "Iota" "Iota" "Œô")
    ("Kappa" "K" nil "&Kappa;" "Kappa" "Kappa" "Œö")
    ("Lambda" "\\Lambda" t "&Lambda;" "Lambda" "Lambda" "Œõ")
    ("Mu" "M" nil "&Mu;" "Mu" "Mu" "Œú")
    ("Nu" "N" nil "&Nu;" "Nu" "Nu" "Œù")
    ("Xi" "\\Xi" t "&Xi;" "Xi" "Xi" "Œû")
    ("Omicron" "O" nil "&Omicron;" "Omicron" "Omicron" "Œü")
    ("Pi" "\\Pi" t "&Pi;" "Pi" "Pi" "Œ†")
    ("Rho" "P" nil "&Rho;" "Rho" "Rho" "Œ°")
    ("Sigma" "\\Sigma" t "&Sigma;" "Sigma" "Sigma" "Œ£")
    ("Tau" "T" nil "&Tau;" "Tau" "Tau" "Œ§")
    ("Upsilon" "\\Upsilon" t "&Upsilon;" "Upsilon" "Upsilon" "Œ•")
    ("Phi" "\\Phi" t "&Phi;" "Phi" "Phi" "Œ¶")
    ("Chi" "X" nil "&Chi;" "Chi" "Chi" "Œß")
    ("Psi" "\\Psi" t "&Psi;" "Psi" "Psi" "Œ®")
    ("Omega" "\\Omega" t "&Omega;" "Omega" "Omega" "Œ©")
    ("alpha" "\\alpha" t "&alpha;" "alpha" "alpha" "Œ±")
    ("beta" "\\beta" t "&beta;" "beta" "beta" "Œ≤")
    ("gamma" "\\gamma" t "&gamma;" "gamma" "gamma" "Œ≥")
    ("delta" "\\delta" t "&delta;" "delta" "delta" "Œ¥")
    ("epsilon" "\\epsilon" t "&epsilon;" "epsilon" "epsilon" "Œµ")
    ("varepsilon" "\\varepsilon" t "&epsilon;" "varepsilon" "varepsilon" "Œµ")
    ("zeta" "\\zeta" t "&zeta;" "zeta" "zeta" "Œ∂")
    ("eta" "\\eta" t "&eta;" "eta" "eta" "Œ∑")
    ("theta" "\\theta" t "&theta;" "theta" "theta" "Œ∏")
    ("iota" "\\iota" t "&iota;" "iota" "iota" "Œπ")
    ("kappa" "\\kappa" t "&kappa;" "kappa" "kappa" "Œ∫")
    ("lambda" "\\lambda" t "&lambda;" "lambda" "lambda" "Œª")
    ("mu" "\\mu" t "&mu;" "mu" "mu" "Œº")
    ("nu" "\\nu" t "&nu;" "nu" "nu" "ŒΩ")
    ("xi" "\\xi" t "&xi;" "xi" "xi" "Œæ")
    ("omicron" "\\textit{o}" nil "&omicron;" "omicron" "omicron" "Œø")
    ("pi" "\\pi" t "&pi;" "pi" "pi" "œÄ")
    ("rho" "\\rho" t "&rho;" "rho" "rho" "œÅ")
    ("sigmaf" "\\varsigma" t "&sigmaf;" "sigmaf" "sigmaf" "œÇ")
    ("varsigma" "\\varsigma" t "&sigmaf;" "varsigma" "varsigma" "œÇ")
    ("sigma" "\\sigma" t "&sigma;" "sigma" "sigma" "œÉ")
    ("tau" "\\tau" t "&tau;" "tau" "tau" "œÑ")
    ("upsilon" "\\upsilon" t "&upsilon;" "upsilon" "upsilon" "œÖ")
    ("phi" "\\phi" t "&phi;" "phi" "phi" "œÜ")
    ("chi" "\\chi" t "&chi;" "chi" "chi" "œá")
    ("psi" "\\psi" t "&psi;" "psi" "psi" "œà")
    ("omega" "\\omega" t "&omega;" "omega" "omega" "œâ")
    ("thetasym" "\\vartheta" t "&thetasym;" "theta" "theta" "œë")
    ("vartheta" "\\vartheta" t "&thetasym;" "theta" "theta" "œë")
    ("upsih" "\\Upsilon" t "&upsih;" "upsilon" "upsilon" "œí")
    ("piv" "\\varpi" t "&piv;" "omega-pi" "omega-pi" "œñ")
    ("bull" "\\textbullet{}" nil "&bull;" "*" "*" "‚Ä¢")
    ("bullet" "\\textbullet{}" nil "&bull;" "*" "*" "‚Ä¢")
    ("hellip" "\\dots{}" nil "&hellip;" "..." "..." "‚Ä¶")
    ("dots" "\\dots{}" nil "&hellip;" "..." "..." "‚Ä¶")
    ("prime" "\\prime" t "&prime;" "'" "'" "‚Ä≤")
    ("Prime" "\\prime{}\\prime" t "&Prime;" "''" "''" "‚Ä≥")
    ("oline" "\\overline{~}" t "&oline;" "[overline]" "¬Ø" "‚Äæ")
    ("frasl" "/" nil "&frasl;" "/" "/" "‚ÅÑ")
    ("weierp" "\\wp" t "&weierp;" "P" "P" "‚Ñò")
    ("image" "\\Im" t "&image;" "I" "I" "‚Ñë")
    ("real" "\\Re" t "&real;" "R" "R" "‚Ñú")
    ("trade" "\\texttrademark{}" nil "&trade;" "TM" "TM" "‚Ñ¢")
    ("alefsym" "\\aleph" t "&alefsym;" "aleph" "aleph" "‚Ñµ")
    ("larr" "\\leftarrow" t "&larr;" "<-" "<-" "‚Üê")
    ("leftarrow" "\\leftarrow" t "&larr;"  "<-" "<-" "‚Üê")
    ("gets" "\\gets" t "&larr;"  "<-" "<-" "‚Üê")
    ("uarr" "\\uparrow" t "&uarr;" "[uparrow]" "[uparrow]" "‚Üë")
    ("uparrow" "\\uparrow" t "&uarr;" "[uparrow]" "[uparrow]" "‚Üë")
    ("rarr" "\\rightarrow" t "&rarr;" "->" "->" "‚Üí")
    ("to" "\\to" t "&rarr;" "->" "->" "‚Üí")
    ("rightarrow" "\\rightarrow" t "&rarr;"  "->" "->" "‚Üí")
    ("darr" "\\downarrow" t "&darr;" "[downarrow]" "[downarrow]" "‚Üì")
    ("downarrow" "\\downarrow" t "&darr;" "[downarrow]" "[downarrow]" "‚Üì")
    ("harr" "\\leftrightarrow" t "&harr;" "<->" "<->" "‚Üî")
    ("leftrightarrow" "\\leftrightarrow" t "&harr;"  "<->" "<->" "‚Üî")
    ("crarr" "\\hookleftarrow" t "&crarr;" "<-'" "<-'" "‚Üµ")
    ("hookleftarrow" "\\hookleftarrow" t "&crarr;"  "<-'" "<-'" "‚Üµ")
    ("lArr" "\\Leftarrow" t "&lArr;" "<=" "<=" "‚áê")
    ("Leftarrow" "\\Leftarrow" t "&lArr;" "<=" "<=" "‚áê")
    ("uArr" "\\Uparrow" t "&uArr;" "[dbluparrow]" "[dbluparrow]" "‚áë")
    ("Uparrow" "\\Uparrow" t "&uArr;" "[dbluparrow]" "[dbluparrow]" "‚áë")
    ("rArr" "\\Rightarrow" t "&rArr;" "=>" "=>" "‚áí")
    ("Rightarrow" "\\Rightarrow" t "&rArr;" "=>" "=>" "‚áí")
    ("dArr" "\\Downarrow" t "&dArr;" "[dbldownarrow]" "[dbldownarrow]" "‚áì")
    ("Downarrow" "\\Downarrow" t "&dArr;" "[dbldownarrow]" "[dbldownarrow]" "‚áì")
    ("hArr" "\\Leftrightarrow" t "&hArr;" "<=>" "<=>" "‚áî")
    ("Leftrightarrow" "\\Leftrightarrow" t "&hArr;" "<=>" "<=>" "‚áî")
    ("forall" "\\forall" t "&forall;" "[for all]" "[for all]" "‚àÄ")
    ("partial" "\\partial" t "&part;" "[partial differential]" "[partial differential]" "‚àÇ")
    ("exist" "\\exists" t "&exist;" "[there exists]" "[there exists]" "‚àÉ")
    ("exists" "\\exists" t "&exist;" "[there exists]" "[there exists]" "‚àÉ")
    ("empty" "\\empty" t "&empty;" "[empty set]" "[empty set]" "‚àÖ")
    ("emptyset" "\\emptyset" t "&empty;" "[empty set]" "[empty set]" "‚àÖ")
    ("nabla" "\\nabla" t "&nabla;" "[nabla]" "[nabla]" "‚àá")
    ("isin" "\\in" t "&isin;" "[element of]" "[element of]" "‚àà")
    ("in" "\\in" t "&isin;" "[element of]" "[element of]" "‚àà")
    ("notin" "\\notin" t "&notin;" "[not an element of]" "[not an element of]" "‚àâ")
    ("ni" "\\ni" t "&ni;" "[contains as member]" "[contains as member]" "‚àã")
    ("prod" "\\prod" t "&prod;" "[product]" "[n-ary product]" "‚àè")
    ("sum" "\\sum" t "&sum;" "[sum]" "[sum]" "‚àë")
;   ("minus" "\\minus" t "&minus;" "-" "-" "‚àí")
    ("minus" "-" t "&minus;" "-" "-" "‚àí")
    ("lowast" "\\ast" t "&lowast;" "*" "*" "‚àó")
    ("ast" "\\ast" t "&lowast;" "*" "*" "*")
    ("radic" "\\sqrt{\\,}" t "&radic;" "[square root]" "[square root]" "‚àö")
    ("prop" "\\propto" t "&prop;" "[proportional to]" "[proportional to]" "‚àù")
    ("proptp" "\\propto" t "&prop;" "[proportional to]" "[proportional to]" "‚àù")
    ("infin" "\\propto" t "&infin;" "[infinity]" "[infinity]" "‚àû")
    ("infty" "\\infty" t "&infin;" "[infinity]" "[infinity]" "‚àû")
    ("ang" "\\angle" t "&ang;" "[angle]" "[angle]" "‚à†")
    ("angle" "\\angle" t "&ang;" "[angle]" "[angle]" "‚à†")
    ("and" "\\wedge" t "&and;" "[logical and]" "[logical and]" "‚àß")
    ("wedge" "\\wedge" t "&and;" "[logical and]" "[logical and]" "‚àß")
    ("or" "\\vee" t "&or;" "[logical or]" "[logical or]" "‚à®")
    ("vee" "\\vee" t "&or;" "[logical or]" "[logical or]" "‚à®")
    ("cap" "\\cap" t "&cap;" "[intersection]" "[intersection]" "‚à©")
    ("cup" "\\cup" t "&cup;" "[union]" "[union]" "‚à™")
    ("int" "\\int" t "&int;" "[integral]" "[integral]" "‚à´")
;   ("there4" "\\uptherefore" t "&there4;" "[therefore]" "[therefore]" "‚à¥")
    ("there4" "\\therefore" t "&there4;" "[therefore]" "[therefore]" "‚à¥")
    ("sim" "\\sim" t "&sim;" "~" "~" "‚àº")
    ("cong" "\\cong" t "&cong;" "[approx. equal to]" "[approx. equal to]" "‚âÖ")
    ("simeq" "\\simeq" t "&cong;"  "[approx. equal to]" "[approx. equal to]" "‚âÖ")
    ("asymp" "\\asymp" t "&asymp;" "[almost equal to]" "[almost equal to]" "‚âà")
    ("approx" "\\approx" t "&asymp;" "[almost equal to]" "[almost equal to]" "‚âà")
    ("ne" "\\ne" t "&ne;" "[not equal to]" "[not equal to]" "‚â†")
    ("neq" "\\neq" t "&ne;" "[not equal to]" "[not equal to]" "‚â†")
    ("equiv" "\\equiv" t "&equiv;" "[identical to]" "[identical to]" "‚â°")
    ("le" "\\le" t "&le;" "<=" "<=" "‚â§")
    ("ge" "\\ge" t "&ge;" ">=" ">=" "‚â•")
    ("sub" "\\subset" t "&sub;" "[subset of]" "[subset of]" "‚äÇ")
    ("subset" "\\subset" t "&sub;" "[subset of]" "[subset of]" "‚äÇ")
    ("sup" "\\supset" t "&sup;" "[superset of]" "[superset of]" "‚äÉ")
    ("supset" "\\supset" t "&sup;" "[superset of]" "[superset of]" "‚äÉ")
    ("nsub" "\\not\\subset" t "&nsub;" "[not a subset of]" "[not a subset of" "‚äÑ")
    ("sube" "\\subseteq" t "&sube;" "[subset of or equal to]" "[subset of or equal to]" "‚äÜ")
    ("supe" "\\supseteq" t "&supe;" "[superset of or equal to]" "[superset of or equal to]" "‚äá")
    ("oplus" "\\oplus" t "&oplus;" "[circled plus]" "[circled plus]" "‚äï")
    ("otimes" "\\otimes" t "&otimes;" "[circled times]" "[circled times]" "‚äó")
    ("perp" "\\perp" t "&perp;" "[up tack]" "[up tack]" "‚ä•")
    ("sdot" "\\cdot" t "&sdot;" "[dot]" "[dot]" "‚ãÖ")
    ("cdot" "\\cdot" t "&sdot;" "[dot]" "[dot]" "‚ãÖ")
    ("lceil" "\\lceil" t "&lceil;" "[left ceiling]" "[left ceiling]" "‚åà")
    ("rceil" "\\rceil" t "&rceil;" "[right ceiling]" "[right ceiling]" "‚åâ")
    ("lfloor" "\\lfloor" t "&lfloor;" "[left floor]" "[left floor]" "‚åä")
    ("rfloor" "\\rfloor" t "&rfloor;" "[right floor]" "[right floor]" "‚åã")
    ("lang" "\\langle" t "&lang;" "<" "<" "‚ü®")
    ("rang" "\\rangle" t "&rang;" ">" ">" "‚ü©")
    ("loz" "\\diamond" t "&loz;" "[lozenge]" "[lozenge]" "‚óä")
    ("Diamond" "\\diamond" t "&diamond;" "[diamond]" "[diamond]" "‚ãÑ")
    ("spades" "\\spadesuit" t "&spades;" "[spades]" "[spades]" "‚ô†")
    ("spadesuit" "\\spadesuit" t "&spades;" "[spades]" "[spades]" "‚ô†")
    ("clubs" "\\clubsuit" t "&clubs;" "[clubs]" "[clubs]" "‚ô£")
    ("clubsuit" "\\clubsuit" t "&clubs;" "[clubs]" "[clubs]" "‚ô£")
    ("hearts" "\\heartsuit" t "&hearts;" "[hearts]" "[hearts]" "‚ô•")
    ("heartsuit" "\\heartsuit" t "&heartsuit;" "[hearts]" "[hearts]" "‚ô•")
    ("diamondsuit" "\\diamondsuit" t "&diams;" "[diamonds]" "[diamonds]" "‚ô¶")
    ("diams" "\\diamondsuit" t "&diams;" "[diamonds]" "[diamonds]" "‚ô¶")
    ("smile" "\\smile" t "&#9786;" ":-)" ":-)" "‚å£")
    ("blacksmile" "\\blacksmiley{}" nil "&#9787;" ":-)" ":-)" "‚òª")
    ("sad" "\\frownie{}" nil "&#9785;" ":-(" ":-(" "‚òπ")
    ("quot" "\\textquotedbl{}" nil "&quot;" "\"" "\"" "\"")
    ("amp" "\\&" nil "&amp;" "&" "&" "&")
    ("lt" "\\textless{}" nil "&lt;" "<" "<" "<")
    ("gt" "\\textgreater{}" nil "&gt;" ">" ">" ">")
    ("OElig" "\\OE{}" nil "&OElig;" "OE" "OE" "≈í")
    ("oelig" "\\oe{}" nil "&oelig;" "oe" "oe" "≈ì")
    ("Scaron" "\\v{S}" nil "&Scaron;" "S" "S" "≈†")
    ("scaron" "\\v{s}" nil "&scaron;" "s" "s" "≈°")
    ("Yuml" "\\\"{Y}" nil "&Yuml;" "Y" "Y" "≈∏")
    ("circ" "\\circ" t "&circ;" "^" "^" "ÀÜ")
    ("tilde" "\\~{}" nil "&tilde;" "~" "~" "~")
    ("ensp" "\\hspace*{.5em}" nil "&ensp;" " " " " "‚ÄÇ")
    ("emsp" "\\hspace*{1em}" nil "&emsp;" " " " " "‚ÄÉ")
    ("thinsp" "\\hspace*{.2em}" nil "&thinsp;" " " " " "‚Äâ")
    ("zwnj" "\\/{}" nil "&zwnj;" "" "" "‚Äå")
    ("zwj" "" nil "&zwj;" "" "" "‚Äç")
    ("lrm" "" nil "&lrm;" "" "" "‚Äé")
    ("rlm" "" nil "&rlm;" "" "" "‚Äè")
    ("ndash" "--" nil "&ndash;" "-" "-" "‚Äì")
    ("mdash" "---" nil "&mdash;" "--" "--" "‚Äî")
    ("lsquo" "\\textquoteleft{}" nil "&lsquo;" "`" "`" "‚Äò")
    ("rsquo" "\\textquoteright{}" nil "&rsquo;" "'" "'" "‚Äô")
    ("sbquo" "\\quotesinglbase{}" nil "&sbquo;" "," "," "‚Äö")
    ("ldquo" "\\textquotedblleft{}" nil "&ldquo;" "\"" "\"" "‚Äú")
    ("rdquo" "\\textquotedblright{}" nil "&rdquo;" "\"" "\"" "‚Äù")
    ("bdquo" "\\quotedblbase{}" nil "&bdquo;" "\"" "\"" "‚Äû")
    ("dagger" "\\textdagger{}" nil "&dagger;" "[dagger]" "[dagger]" "‚Ä†")
    ("Dagger" "\\textdaggerdbl{}" nil "&Dagger;" "[doubledagger]" "[doubledagger]" "‚Ä°")
    ("permil" "\\textperthousand{}" nil "&permil;" "per thousand" "per thousand" "‚Ä∞")
    ("lsaquo" "\\guilsinglleft{}" nil "&lsaquo;" "<" "<" "‚Äπ")
    ("rsaquo" "\\guilsinglright{}" nil "&rsaquo;" ">" ">" "‚Ä∫")
    ("euro" "\\texteuro{}" nil "&euro;" "EUR" "EUR" "‚Ç¨")
    ("EUR" "\\EUR{}" nil "&euro;" "EUR" "EUR" "‚Ç¨")
    ("EURdig" "\\EURdig{}" nil "&euro;" "EUR" "EUR" "‚Ç¨")
    ("EURhv" "\\EURhv{}" nil "&euro;" "EUR" "EUR" "‚Ç¨")
    ("EURcr" "\\EURcr{}" nil "&euro;" "EUR" "EUR" "‚Ç¨")
    ("EURtm" "\\EURtm{}" nil "&euro;" "EUR" "EUR" "‚Ç¨")
    ("arccos" "\\arccos" t "arccos" "arccos" "arccos" "arccos")
    ("arcsin" "\\arcsin" t "arcsin" "arcsin" "arcsin" "arcsin")
    ("arctan" "\\arctan" t "arctan" "arctan" "arctan" "arctan")
    ("arg" "\\arg" t "arg" "arg" "arg" "arg")
    ("cos" "\\cos" t "cos" "cos" "cos" "cos")
    ("cosh" "\\cosh" t "cosh" "cosh" "cosh" "cosh")
    ("cot" "\\cot" t "cot" "cot" "cot" "cot")
    ("coth" "\\coth" t "coth" "coth" "coth" "coth")
    ("csc" "\\csc" t "csc" "csc" "csc" "csc")
    ("deg" "\\deg" t "&deg;" "deg" "deg" "deg")
    ("det" "\\det" t "det" "det" "det" "det")
    ("dim" "\\dim" t "dim" "dim" "dim" "dim")
    ("exp" "\\exp" t "exp" "exp" "exp" "exp")
    ("gcd" "\\gcd" t "gcd" "gcd" "gcd" "gcd")
    ("hom" "\\hom" t "hom" "hom" "hom" "hom")
    ("inf" "\\inf" t "inf" "inf" "inf" "inf")
    ("ker" "\\ker" t "ker" "ker" "ker" "ker")
    ("lg" "\\lg" t "lg" "lg" "lg" "lg")
    ("lim" "\\lim" t "lim" "lim" "lim" "lim")
    ("liminf" "\\liminf" t "liminf" "liminf" "liminf" "liminf")
    ("limsup" "\\limsup" t "limsup" "limsup" "limsup" "limsup")
    ("ln" "\\ln" t "ln" "ln" "ln" "ln")
    ("log" "\\log" t "log" "log" "log" "log")
    ("max" "\\max" t "max" "max" "max" "max")
    ("min" "\\min" t "min" "min" "min" "min")
    ("Pr" "\\Pr" t "Pr" "Pr" "Pr" "Pr")
    ("sec" "\\sec" t "sec" "sec" "sec" "sec")
    ("sin" "\\sin" t "sin" "sin" "sin" "sin")
    ("sinh" "\\sinh" t "sinh" "sinh" "sinh" "sinh")
    ("sup" "\\sup" t "&sup;" "sup" "sup" "sup")
    ("tan" "\\tan" t "tan" "tan" "tan" "tan")
    ("tanh" "\\tanh" t "tanh" "tanh" "tanh" "tanh")
    ("frac12" "\\textonehalf{}" nil "&frac12;" "1/2" "¬Ω" "¬Ω")
    ("frac14" "\\textonequarter{}" nil "&frac14;" "1/4" "¬º" "¬º")
    ("frac34" "\\textthreequarters{}" nil "&frac34;" "3/4" "¬æ" "¬æ")
    ("div" "\\textdiv{}" nil "&divide;" "/" "√∑" "√∑")
    ("acute" "\\textasciiacute{}" nil "&acute;" "'" "¬¥" "¬¥")
    ("nsup" "\\not\\supset" t "&nsup;" "[not a superset of]" "[not a superset of]" "‚äÖ")
    ("smiley" "\\smiley{}" nil "&#9786;" ":-)" ":-)" "‚ò∫")
    )
  "Default entities used in Org-mode to preduce special characters.
For details see `org-entities-user'.")

(defsubst org-entity-get (name)
  "Get the proper association for NAME from the entity lists.
This first checks the user list, then the built-in list."
  (or (assoc name org-entities-user)
      (assoc name org-entities)))

(defun org-entity-get-representation (name kind)
  "Get the correct representation of entity NAME for export type KIND.
Kind can be any of `latex', `html', `ascii', `latin1', or `utf8'."
  (let* ((e (org-entity-get name))
	 (n (cdr (assq kind '((latex . 1) (html . 3) (ascii . 4)
			      (latin1 . 5) (utf8 . 6)))))
	 (r (and e n (nth n e))))
    (if (and e r
	     (not org-entities-ascii-explanatory)
	     (memq kind '(ascii latin1 utf8))
	     (= (string-to-char r) ?\[))
	(concat "\\" name)
      r)))

(defsubst org-entity-latex-math-p (name)
  "Does entity NAME require math mode in LaTeX?"
  (nth 2 (org-entity-get name)))

;; Helpfunctions to create a table for orgmode.org/worg/org-symbols.org

(defun org-entities-create-table ()
  "Create an org-mode table with all entities."
  (interactive)
  (let ((ll org-entities)
	(pos (point))
	e latex mathp html latin utf8 name ascii)
    (insert "|Name|LaTeX code|LaTeX|HTML code |HTML|ASCII|Latin1|UTF-8\n|-\n")
    (while ll
      (setq e (pop ll))
      (setq name (car e)
	    latex (nth 1 e)
	    mathp (nth 2 e)
	    html (nth 3 e)
	    ascii (nth 4 e)
	    latin (nth 5 e)
	    utf8 (nth 6 e))
      (if (equal ascii "|") (setq ascii "\\vert"))
      (if (equal latin "|") (setq latin "\\vert"))
      (if (equal utf8  "|") (setq utf8  "\\vert"))
      (if (equal ascii "=>") (setq ascii "= >"))
      (if (equal latin "=>") (setq latin "= >"))
      (insert "|" name
	      "|" (format "=%s=" latex)
	      "|" (format (if mathp "$%s$" "$\\mbox{%s}$")
			  latex)
	      "|" (format "=%s=" html) "|" html
	      "|" ascii "|" latin "|" utf8
	      "|\n"))
    (goto-char pos)
    (org-table-align)))

(defun replace-amp ()
  "Postprocess HTML file to unescape the ampersant."
  (interactive)
  (while (re-search-forward "<td>&amp;\\([^<;]+;\\)" nil t)
    (replace-match (concat "<td>&" (match-string 1)) t t)))

(provide 'org-entities)

;; arch-tag: e6bd163f-7419-4009-9c93-a74623016424

;;; org-entities.el ends here
